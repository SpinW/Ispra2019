language: shell
dist: xenial
node_js:
  - 7
env:
  global:
    - secure: pCjT/7H5biKb3Ths1iZVT8ccBDrdtcGF4BvYmvBaBxgk8DnUNE+2FzT20P3FbsjY8jC+d4xpqXblCr1vl0AEx/qBvtLPkweoOsal+aI72h/FIDiSx+BF/oEmri0bvpMPaAuXnjjYTLaZbZoj66LhoDvEbtFePKL1PGq4qVaPHv6/PViiGh4MfIoy0P2PP5eHdGgDuiHCZ7aQCbeNDCBFWp4S+8SMsD41xtHaF2/9sPei0Osr$
before_script:
  - export TRAVIS_REPO_NAME=${TRAVIS_REPO_SLUG#*/}
  - npm install -g decktape
script:
  # This pause is for Github to compile
  - sleep 2m
  - decktape reveal http://www.spinw.org/$TRAVIS_REPO_NAME $TRAVIS_REPO_NAME.pdf
after_success:
  - git config --global user.email "travis@travis-ci.org"
  - git config --global user.name "Travis CI"
  - git add $TRAVIS_REPO_NAME.pdf
  - git commit -m 'Presentation update [ci skip]'
  - git push -f -q https://$GH_TOKEN@github.com/SpinW/$TRAVIS_REPO_NAME.git master
